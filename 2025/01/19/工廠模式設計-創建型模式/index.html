<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>工廠模式設計(創建型模式) | Jed學習筆記</title><meta name="author" content="Jed Hung"><meta name="copyright" content="Jed Hung"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="設計模式-工廠模式，介紹什麼是工廠模式、用途、設計概念">
<meta property="og:type" content="article">
<meta property="og:title" content="工廠模式設計(創建型模式)">
<meta property="og:url" content="https://jed-4a6g0109.github.io/Software-Jed/2025/01/19/%E5%B7%A5%E5%BB%A0%E6%A8%A1%E5%BC%8F%E8%A8%AD%E8%A8%88-%E5%89%B5%E5%BB%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/index.html">
<meta property="og:site_name" content="Jed學習筆記">
<meta property="og:description" content="設計模式-工廠模式，介紹什麼是工廠模式、用途、設計概念">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://s3.ap-northeast-1.amazonaws.com/django.blog/static/article_image/MQ68T61TJP7ZWGBENS27X17RV0.jpeg">
<meta property="article:published_time" content="2025-01-19T12:20:08.608Z">
<meta property="article:modified_time" content="2025-12-14T13:04:30.343Z">
<meta property="article:author" content="Jed Hung">
<meta property="article:tag" content="Python">
<meta property="article:tag" content="工廠模式">
<meta property="article:tag" content="設計模式">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://s3.ap-northeast-1.amazonaws.com/django.blog/static/article_image/MQ68T61TJP7ZWGBENS27X17RV0.jpeg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "工廠模式設計(創建型模式)",
  "url": "https://jed-4a6g0109.github.io/Software-Jed/2025/01/19/%E5%B7%A5%E5%BB%A0%E6%A8%A1%E5%BC%8F%E8%A8%AD%E8%A8%88-%E5%89%B5%E5%BB%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/",
  "image": "https://s3.ap-northeast-1.amazonaws.com/django.blog/static/article_image/MQ68T61TJP7ZWGBENS27X17RV0.jpeg",
  "datePublished": "2025-01-19T12:20:08.608Z",
  "dateModified": "2025-12-14T13:04:30.343Z",
  "author": [
    {
      "@type": "Person",
      "name": "Jed Hung",
      "url": "https://jed-4a6g0109.github.io/Software-Jed"
    }
  ]
}</script><link rel="shortcut icon" href="/Software-Jed/img/favicon.png"><link rel="canonical" href="https://jed-4a6g0109.github.io/Software-Jed/2025/01/19/%E5%B7%A5%E5%BB%A0%E6%A8%A1%E5%BC%8F%E8%A8%AD%E8%A8%88-%E5%89%B5%E5%BB%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/Software-Jed/css/index.css?v=5.5.3"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@7.1.0/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/Software-Jed/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: 'Copy Successful',
    error: 'Copy Failed',
    noSupport: 'Browser Not Supported'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'Just now',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.12.0/dist/infinitegrid.min.js',
    buttonText: 'Load More'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '工廠模式設計(創建型模式)',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><meta name="generator" content="Hexo 8.1.1"></head><body><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(https://s3.ap-northeast-1.amazonaws.com/django.blog/static/article_image/MQ68T61TJP7ZWGBENS27X17RV0.jpeg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/Software-Jed/"><span class="site-name">Jed學習筆記</span></a><a class="nav-page-title" href="/Software-Jed/"><span class="site-name">工廠模式設計(創建型模式)</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  Back to Home</span></span></a></span><div id="menus"></div></nav><div id="post-info"><h1 class="post-title">工廠模式設計(創建型模式)</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2025-01-19T12:20:08.608Z" title="Created 2025-01-19 20:20:08">2025-01-19</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2025-12-14T13:04:30.343Z" title="Updated 2025-12-14 21:04:30">2025-12-14</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/Software-Jed/categories/%E8%A8%AD%E8%A8%88%E6%A8%A1%E5%BC%8F/">設計模式</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post Views:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h1 id="工廠模式設計-創建型模式"><a href="#工廠模式設計-創建型模式" class="headerlink" title="工廠模式設計(創建型模式)"></a>工廠模式設計(創建型模式)</h1><hr>
<h2 id="工廠方法"><a href="#工廠方法" class="headerlink" title="工廠方法"></a>工廠方法</h2><p>與簡單工廠差異在於</p>
<ul>
<li><p>工廠類不負責創建，而是交由子類來決定實例</p>
</li>
<li><p>遵循開閉原則：</p>
<p>  可以透過引進新的具體工廠類來擴展產品的種類，而不需要修改現有代碼。</p>
</li>
<li><p>遵循單一職責原則：</p>
<p>  每個具體工廠類別只負責創造一種特定產品，職責單一，程式碼更清晰。</p>
</li>
<li><p>增強程式碼的靈活性：</p>
<p>  子類別可以覆寫工廠方法來改變創建產品的方式，增強了程式碼的靈活性和可擴展性。</p>
<p>  在可提取共通邏輯進行抽象，並封裝且隱藏實作細節，能夠隨著需求快速創建物件的場景</p>
</li>
</ul>
<hr>
<p> 來時做一個案例，今天收到需求是串接第三方服務來登入，有X、Meta、Google，在第三方服務需實作登入以及確認服務狀態，所以提取出共通行為進行抽象基類</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> abc <span class="keyword">import</span> ABC, abstractmethod</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ThirdPartyServices</span>(<span class="title class_ inherited__">ABC</span>):</span><br><span class="line"></span><br><span class="line"><span class="meta">    @abstractmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">login</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @abstractmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_health_status</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>

<p>接著實作登入以及取得服務狀態邏輯</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MeteProcessor</span>(<span class="title class_ inherited__">ThirdPartyServices</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">login</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Welcome to Meta&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_health_status</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="number">200</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">XProcessor</span>(<span class="title class_ inherited__">ThirdPartyServices</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">login</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Welcome to X&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_health_status</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="number">200</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">GoogleProcessor</span>(<span class="title class_ inherited__">ThirdPartyServices</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">login</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Welcome to Google&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_health_status</span>(<span class="params">self</span>):</span><br><span class="line">        service = <span class="number">500</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> service == <span class="number">500</span>:</span><br><span class="line">            <span class="keyword">raise</span> Exception(<span class="string">&quot;Google service 500&quot;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="number">200</span></span><br></pre></td></tr></table></figure>


<p>接著建立工廠基類(與簡單工廠不同在於此)，並建立Meta、X、Google工廠並各自實作建立client行為</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ThirdPartyServicesFactory</span>(<span class="title class_ inherited__">ABC</span>):</span><br><span class="line"><span class="meta">    @abstractmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">create_client</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MetaFactory</span>(<span class="title class_ inherited__">ThirdPartyServicesFactory</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">create_client</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> MeteProcessor()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">XFactory</span>(<span class="title class_ inherited__">ThirdPartyServicesFactory</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">create_client</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> XProcessor()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">GoogleFactory</span>(<span class="title class_ inherited__">ThirdPartyServicesFactory</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">create_client</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> GoogleProcessor()</span><br></pre></td></tr></table></figure>
<p>最後客戶端選擇工廠並做實例</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">client_code</span>(<span class="params">factory: ThirdPartyServicesFactory</span>):</span><br><span class="line">    client = factory.create_client()</span><br><span class="line">    <span class="built_in">print</span>(client.login())</span><br><span class="line">    <span class="built_in">print</span>(client.get_health_status())</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    google_factory = GoogleFactory()</span><br><span class="line">    client_code(google_factory)</span><br><span class="line"></span><br><span class="line">    x_factory = XFactory()</span><br><span class="line">    client_code(x_factory)</span><br></pre></td></tr></table></figure>

<p> 以上面例子我們再來複習一下工廠方法到底解決了甚麼以及與簡單工廠差異</p>
<ul>
<li><p>工廠類不負責創建，而是交由子類來決定實例<br>三個第三方服務建立三個工廠，而不是一個工廠來選擇並實例，範例中抽象了ThirdPartyServicesFactory並由子類MetaFactory、XFactory、GoogleFactory進行實例</p>
</li>
<li><p>遵循開閉原則<br>  如果架構師想在新增新的第三方服務例如QQ，那只需增加QQProcessor、QQFactory就結束了，新增了行為也確保無須更動程式碼</p>
</li>
<li><p>遵循單一職責原則<br>  Meta、X、Google三者第三方服務互不參雜，每個具體工廠類別只負責創造一種特定產品，職責單一，程式碼更清晰。</p>
</li>
<li><p>增強程式碼的靈活性<br>  可依據業務邏輯選定要使用的第三方服務，假設今天只需接上Google服務那只要對GoogleFactory進行實例，且封裝了內部細節，client無須知道裡面細節</p>
</li>
</ul>
<hr>
<h2 id="設計問題"><a href="#設計問題" class="headerlink" title="設計問題"></a>設計問題</h2><ul>
<li><p>複雜度與多類問題<br>基類與工廠類過多對於簡單系統來說可能是一種負擔，這就是常見的過度設計</p>
</li>
<li><p>測試問題<br>工廠在依賴與建構上如果太複雜，在建構單元測試時會變得非常困難</p>
</li>
</ul>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>Author: </span><span class="post-copyright-info"><a href="https://jed-4a6g0109.github.io/Software-Jed">Jed Hung</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>Link: </span><span class="post-copyright-info"><a href="https://jed-4a6g0109.github.io/Software-Jed/2025/01/19/%E5%B7%A5%E5%BB%A0%E6%A8%A1%E5%BC%8F%E8%A8%AD%E8%A8%88-%E5%89%B5%E5%BB%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/">https://jed-4a6g0109.github.io/Software-Jed/2025/01/19/%E5%B7%A5%E5%BB%A0%E6%A8%A1%E5%BC%8F%E8%A8%AD%E8%A8%88-%E5%89%B5%E5%BB%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>Copyright Notice: </span><span class="post-copyright-info">All articles on this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless otherwise stated.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/Software-Jed/tags/Python/">Python</a><a class="post-meta__tags" href="/Software-Jed/tags/%E5%B7%A5%E5%BB%A0%E6%A8%A1%E5%BC%8F/">工廠模式</a><a class="post-meta__tags" href="/Software-Jed/tags/%E8%A8%AD%E8%A8%88%E6%A8%A1%E5%BC%8F/">設計模式</a></div><div class="post-share"><div class="social-share" data-image="https://s3.ap-northeast-1.amazonaws.com/django.blog/static/article_image/MQ68T61TJP7ZWGBENS27X17RV0.jpeg" data-sites="facebook,x,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related full-width" href="/Software-Jed/2025/01/19/Python-Anti-pattern/" title="Python Anti-pattern"><img class="cover" src="https://s3.ap-northeast-1.amazonaws.com/django.blog/static/article_image/MQ68T61TJP7ZWGBENS27X17RV0.jpeg" onerror="onerror=null;src='/Software-Jed/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">Previous</div><div class="info-item-2">Python Anti-pattern</div></div><div class="info-2"><div class="info-item-1">Anti-pattern指在軟體開發中，看似合理的解決方案，但實際上會導致更多問題且難以維護的設計，從設計中可以看到這些常見特性 :  難以維護  難以閱讀  難以擴展  性能問題  漏洞  副作用多  短期開發速成，長期有害(技術債)   Anti-pattern反設計可以指任何的設計而非只有code的設計，例如:資料庫Schema設計，系統設計等等。本篇是針對code的設計去探討  常見的Anti-pattern God Object（上帝物件）描述：一個物件負責過多的功能，導致高度耦合，缺乏單一責任性。問題：難以測試和維護，修改一個功能可能壞多個功能。 Spaghetti Code（意大利麵條代碼）描述：結構混亂，通常是因為過度使用全局變量或缺乏清晰的模塊劃分。問題：難以理解和修改，任何變動都可能導致不可預見的錯誤。 Cargo Cult Programming描述：盲目地模仿設計模式或是方法，而不理解其內在的原理和適用範圍。問題：通常會在錯誤的上下文中使用，導致不合適的解決方案。 假設開發者看到某個項目中使用了多重繼承，便在自己的代碼中也使用這種模式，儘管實際上不需要。 ...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>Related Articles</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/Software-Jed/2025/01/19/%E7%B0%A1%E5%96%AE%E5%B7%A5%E5%BB%A0%E6%A8%A1%E5%BC%8F%E8%A8%AD%E8%A8%88-%E5%89%B5%E5%BB%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/" title="簡單工廠模式設計(創建型模式)"><img class="cover" src="https://s3.ap-northeast-1.amazonaws.com/django.blog/static/article_image/MQ68T61TJP7ZWGBENS27X17RV0.jpeg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-01-19</div><div class="info-item-2">簡單工廠模式設計(創建型模式)</div></div><div class="info-2"><div class="info-item-1">工廠模式設計(創建型模式) 簡單工廠 工廠方法 抽象工廠  簡單工廠(靜態工廠)在可提取共通邏輯進行抽象，並封裝且隱藏實作細節，常運用在初期系統開發以及產品數量較少且變化不頻繁的場景  工廠類提供靜態方法來選擇要建立的實例 根據參數透過工廠來建立實例 有些書歸類為是程式上的風格不一定歸納為設計  今天啊浩去三媽臭臭鍋吃飯，然後看到了三媽的飲料機，而飲料機比喻為工廠，提供了可樂，雪碧，檸檬紅茶，三種飲料，基底都是水，外部透過參數選擇要建立的飲料，並流出來 水為抽象類(基類)  可樂 雪碧 檸檬紅茶  飲料則定了三個class，各自實作飲料，雖然現實中飲料機是直接現成飲料倒進去XD，我們想像飲料機有了水只要加上飲料的原料就能生產飲料出來  💡無需傳遞實例變量、無需實例，簡單工程又稱靜態工廠  UML 類圖 特性 無需關注與理解工廠內部實作，只需傳遞參數建立實例 建立職責區分開 在業務需求不變下只需繼承base class就能快速創建新需求  場景123456789101112131415161718192021222324252627282930313233343536373839...</div></div></div></a><a class="pagination-related" href="/Software-Jed/2025/01/19/Python-dataclass/" title="Python @dataclass"><img class="cover" src="https://s3.ap-northeast-1.amazonaws.com/django.blog/static/article_image/MQ68T61TJP7ZWGBENS27X17RV0.jpeg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-01-19</div><div class="info-item-2">Python @dataclass</div></div><div class="info-2"><div class="info-item-1">有些時候想簡化類別的定義，特別是那些主要用於儲存資料的類，在python 3.7提供了@dataclass decorator，直接來看例子 例子: 建立了Point 每次實例需要輸入x與y，在正常寫法會先寫__init__與定義類 12345678class Point():    def __init__(self, x: int, y: int = 0):        self.x = x        self.y = ypoint = Point(x=5)print(point.x)   而使用@dataclass會讓class簡化許多，如需再定義__init__ 1234567891011from dataclasses import dataclass@dataclass()class Point:    x: int    y: int = 0point = Point(x=5)print(point.x)  @dataclass會自動產生方法，減少了樣板代碼的編寫，而除了簡化還能透過註釋增加閱讀性與可讀性 例子:建立汽車資訊的dataclass，datacla...</div></div></div></a><a class="pagination-related" href="/Software-Jed/2025/01/19/Web-API%E8%A8%AD%E8%A8%88-%E8%A8%AD%E8%A8%88%E8%88%87%E6%8C%91%E6%88%B0/" title="Web API設計 - 設計與挑戰"><img class="cover" src="https://s3.ap-northeast-1.amazonaws.com/django.blog/static/article_image/MQ68T61TJP7ZWGBENS27X17RV0.jpeg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-01-19</div><div class="info-item-2">Web API設計 - 設計與挑戰</div></div><div class="info-2"><div class="info-item-1">API 設計全名 Application Programming Interface  透過了解需求的優先級，設計者可以在這些選項之間找到平衡。 1. 通用 API vs 特定 API所有客戶端是否應該使用同一個通用 API，還是為不同需求提供特定的 API？  通用 API 優勢： 高重用性，減少重複開發。 易於維護，統一版本管理。   劣勢： 可能過於複雜，導致學習曲線陡峭。 難以滿足特定需求，客戶端需進行額外的資料處理。 設計過於通用時，API定義模糊不清。   例子：GraphQL 允許客戶端自行定義所需的資料結構。   特定 API 優勢： 精準滿足需求，減少客戶端資料處理負擔。 更易於理解，適合特定場景。   劣勢： 重複開發，增加維護成本。 客戶端需求變更時，需頻繁修改 API。   例子：REST API 中 /users/{id} 提供特定使用者的資訊，而 /users 提供所有使用者的資訊。     2. 細 vs 粗的EndPoint(端點)與操作範圍如何在API的功能廣度與深度之間取得平衡?  細粒度端點 優勢： 更靈活，可精確執行操作。 客戶端只需請求所...</div></div></div></a><a class="pagination-related" href="/Software-Jed/2025/01/19/Python-Clean-Code-%E6%A6%82%E5%BF%B5%E4%BB%A5%E5%8F%8A%E6%B7%BA%E8%AB%87/" title="Python Clean Code"><img class="cover" src="https://s3.ap-northeast-1.amazonaws.com/django.blog/static/article_image/XWU53IIYXCG7KEQ4F4591FESDS5YH0LC.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-01-19</div><div class="info-item-2">Python Clean Code</div></div><div class="info-2"><div class="info-item-1">Python Clean Code 概念以及淺談(1)此文章主要講述  何謂 Clean Code? Python 結構化、格式化、統一程式碼與該如何落實Code style規範與工具  何謂Clean Code?何謂Clean Code? 其實沒有一定的答案也沒有絕對，但Clean Code不限語言有這幾種常見特性  簡潔明瞭：程式碼應該易於理解，避免不必要的複雜性。 可讀性：良好的命名、適當的註解和結構化的代碼有助於其他開發者快速理解程式碼的功能。 可維護性：程式碼應該易於修改和擴展，能夠適應未來的需求變更。 一致性：遵循一致的編碼風格和規範，保持程式碼的一致性。  專業的軟體工程師寫程式不是寫給機器的，目的除了給機器跑能動以外還要人能看的懂才是好Code  Clean Code重要性可維護性和可閱讀性直接影響開發速度和專案的可行性。如果收到需求後需要花時間進行重構，並且每次收到新需求時都要重構，不僅會浪費時間，還可能導致重構的成本超過重新設計的成本。更糟的是，如果在重構過程中引發了錯誤，可能會導致服務中斷或產品無法使用。這些情況是軟體工程師最不希望遇到的。這樣的情況充分說明...</div></div></div></a><a class="pagination-related" href="/Software-Jed/2025/01/19/API%E9%98%B2%E7%A6%A6%E6%80%A7%E7%A8%8B%E5%BC%8F%E8%A8%AD%E8%A8%88/" title="API防禦性程式設計"><img class="cover" src="https://s3.ap-northeast-1.amazonaws.com/django.blog/static/article_image/MQ68T61TJP7ZWGBENS27X17RV0.jpeg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-01-19</div><div class="info-item-2">API防禦性程式設計</div></div><div class="info-2"><div class="info-item-1">防禦性程式設計 防禦性程式防禦性設計與DbC合約設計有些不同，防禦性設計專注於程式上的保護，但這兩項設計並沒有相斥，是可以互補的 Value substitution (值的替換)當輸入非預期值必須要處理的情境例子:  api interface定義article_id要傳遞的是int，但client卻輸入str，像這種情況就需要處理，即使DbC合約上沒講也應該要防呆 1/api/v1/articles/&#123;article_id&#125;/comments  遇到這種情境通常會使用Value substitution來解決，直接舉例API常見的情況，當client傳遞參數到後端時，需要做非預期值的處理，將錯誤轉成HTTP Code 告知 client為錯誤格式請求，避免讓程式直接error 123456789101112131415161718from fastapi import FastAPI, HTTPExceptionimport uvicornapp = FastAPI()db = &#123;1: &#123;&quot;article_id&quot;: ...</div></div></div></a><a class="pagination-related" href="/Software-Jed/2025/01/19/Python-Context-manager/" title="Python Context manager"><img class="cover" src="https://s3.ap-northeast-1.amazonaws.com/django.blog/static/article_image/MQ68T61TJP7ZWGBENS27X17RV0.jpeg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-01-19</div><div class="info-item-2">Python Context manager</div></div><div class="info-2"><div class="info-item-1">Python Context manager上下文管理器（Context Manager）在 Python 中，上下文管理器是一種自動管理資源的工具，能幫助我們確保在使用完資源後進行適當的清理。中文有一句成語叫「前因後果」，我們可以用這個成語來形象地解釋上下文管理器的作用。 例子 假設今天老闆要求你用財務上半季的營收 Excel 檔案視覺化為長條圖。要完成這個任務，我們首先需要讀取 Excel 檔案。這裡，我們可以使用上下文管理器來處理檔案的打開和關閉。  前因：因為需要處理某個資源（如打開文件），所以我們寫了一段代碼來操作這個資源。 後果：當代碼執行完畢後，需要進行一些清理工作（如關閉文件），這樣可以確保資源被正確地釋放。  例子1 1234567# 上下文管理器示例excel_file = open(&#x27;202401.csv&#x27;)  # 上文 (前因)try:    excel_to_bar_chart(excel_file)finally:    excel_file.close()  # 下文 (後果)  上面程式碼的確達到需求，但有沒有更簡潔的寫法呢?在...</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="https://s3.ap-northeast-1.amazonaws.com/django.blog/static/article_image/CQ6DT61DJP7CWGBANS27X17RV0.png" onerror="this.onerror=null;this.src='/Software-Jed/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">Jed Hung</div><div class="author-info-description">邁向雲原生&架構師之路</div><div class="site-data"><a href="/Software-Jed/archives/"><div class="headline">Articles</div><div class="length-num">27</div></a><a href="/Software-Jed/tags/"><div class="headline">Tags</div><div class="length-num">21</div></a><a href="/Software-Jed/categories/"><div class="headline">Categories</div><div class="length-num">18</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/JED-4a6g0109"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">放我的學習筆記</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Contents</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%B7%A5%E5%BB%A0%E6%A8%A1%E5%BC%8F%E8%A8%AD%E8%A8%88-%E5%89%B5%E5%BB%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.</span> <span class="toc-text">工廠模式設計(創建型模式)</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B7%A5%E5%BB%A0%E6%96%B9%E6%B3%95"><span class="toc-number">1.1.</span> <span class="toc-text">工廠方法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A8%AD%E8%A8%88%E5%95%8F%E9%A1%8C"><span class="toc-number">1.2.</span> <span class="toc-text">設計問題</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Posts</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/Software-Jed/2025/02/10/Hash-%E5%93%88%E5%B8%8C%E3%80%81%E9%9B%9C%E6%B9%8A/" title="Hash(哈希、雜湊)"><img src="https://s3.ap-northeast-1.amazonaws.com/django.blog/static/article_image/xa6tpsoqTQDyslzqHusztEOiZ4YAYB05.png" onerror="this.onerror=null;this.src='/Software-Jed/img/404.jpg'" alt="Hash(哈希、雜湊)"/></a><div class="content"><a class="title" href="/Software-Jed/2025/02/10/Hash-%E5%93%88%E5%B8%8C%E3%80%81%E9%9B%9C%E6%B9%8A/" title="Hash(哈希、雜湊)">Hash(哈希、雜湊)</a><time datetime="2025-02-10T09:02:48.461Z" title="Created 2025-02-10 17:02:48">2025-02-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/Software-Jed/2025/02/06/%E5%A0%86%E7%96%8A-Stack/" title="堆疊(Stack)"><img src="https://s3.ap-northeast-1.amazonaws.com/django.blog/static/article_image/AJlUGQxMphTRULj2G0LhWfNHjeZgQUuO.png" onerror="this.onerror=null;this.src='/Software-Jed/img/404.jpg'" alt="堆疊(Stack)"/></a><div class="content"><a class="title" href="/Software-Jed/2025/02/06/%E5%A0%86%E7%96%8A-Stack/" title="堆疊(Stack)">堆疊(Stack)</a><time datetime="2025-02-06T13:50:02.159Z" title="Created 2025-02-06 21:50:02">2025-02-06</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/Software-Jed/2025/02/06/%E4%BD%87%E5%88%97-Queue/" title="佇列(Queue)"><img src="https://s3.ap-northeast-1.amazonaws.com/django.blog/static/article_image/AJlUGQxMphTRULj2G0LhWfNHjeZgQUuO.png" onerror="this.onerror=null;this.src='/Software-Jed/img/404.jpg'" alt="佇列(Queue)"/></a><div class="content"><a class="title" href="/Software-Jed/2025/02/06/%E4%BD%87%E5%88%97-Queue/" title="佇列(Queue)">佇列(Queue)</a><time datetime="2025-02-06T08:44:39.592Z" title="Created 2025-02-06 16:44:39">2025-02-06</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/Software-Jed/2025/02/05/%E9%8F%88%E7%B5%90%E4%B8%B2%E5%88%97-Linked-List/" title="鏈結串列(Linked List)"><img src="https://s3.ap-northeast-1.amazonaws.com/django.blog/static/article_image/u1DqPVdoQex63jMr0edeKqLVXf6JaPVN.png" onerror="this.onerror=null;this.src='/Software-Jed/img/404.jpg'" alt="鏈結串列(Linked List)"/></a><div class="content"><a class="title" href="/Software-Jed/2025/02/05/%E9%8F%88%E7%B5%90%E4%B8%B2%E5%88%97-Linked-List/" title="鏈結串列(Linked List)">鏈結串列(Linked List)</a><time datetime="2025-02-05T14:31:49.548Z" title="Created 2025-02-05 22:31:49">2025-02-05</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/Software-Jed/2025/02/04/%E9%99%A3%E5%88%97-Array-%E6%A6%82%E5%BF%B5%E8%88%87%E4%BB%8B%E7%B4%B9/" title="陣列(Array)概念與介紹"><img src="https://s3.ap-northeast-1.amazonaws.com/django.blog/static/article_image/HR21KzZAddWqXVimHGkaCdAKIOYUIfb1.png" onerror="this.onerror=null;this.src='/Software-Jed/img/404.jpg'" alt="陣列(Array)概念與介紹"/></a><div class="content"><a class="title" href="/Software-Jed/2025/02/04/%E9%99%A3%E5%88%97-Array-%E6%A6%82%E5%BF%B5%E8%88%87%E4%BB%8B%E7%B4%B9/" title="陣列(Array)概念與介紹">陣列(Array)概念與介紹</a><time datetime="2025-02-04T09:37:45.398Z" title="Created 2025-02-04 17:37:45">2025-02-04</time></div></div></div></div></div></div></main><footer id="footer"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2025 By Jed Hung</span><span class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 8.1.1</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.5.3</a></span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Reading Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Toggle Between Light and Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle Between Single-column and Double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Settings"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back to Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/Software-Jed/js/utils.js?v=5.5.3"></script><script src="/Software-Jed/js/main.js?v=5.5.3"></script><div class="js-pjax"><script>(() => {
  const runMermaid = ele => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    ele.forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const config = mermaidSrc.dataset.config ? JSON.parse(mermaidSrc.dataset.config) : {}
      if (!config.theme) {
        config.theme = theme
      }
      const mermaidThemeConfig = `%%{init: ${JSON.stringify(config)}}%%\n`
      const mermaidID = `mermaid-${index}`
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)
      const renderMermaid = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      // mermaid v9 and v10 compatibility
      typeof renderFn === 'string' ? renderMermaid(renderFn) : renderFn.then(({ svg }) => renderMermaid(svg))
    })
  }

  const codeToMermaid = () => {
    const codeMermaidEle = document.querySelectorAll('pre > code.mermaid')
    if (codeMermaidEle.length === 0) return

    codeMermaidEle.forEach(ele => {
      const preEle = document.createElement('pre')
      preEle.className = 'mermaid-src'
      preEle.hidden = true
      preEle.textContent = ele.textContent
      const newEle = document.createElement('div')
      newEle.className = 'mermaid-wrap'
      newEle.appendChild(preEle)
      ele.parentNode.replaceWith(newEle)
    })
  }

  const loadMermaid = () => {
    if (true) codeToMermaid()
    const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
    if ($mermaid.length === 0) return

    const runMermaidFn = () => runMermaid($mermaid)
    btf.addGlobalFn('themeChange', runMermaidFn, 'mermaid')
    window.loadMermaid ? runMermaidFn() : btf.getScript('https://cdn.jsdelivr.net/npm/mermaid@11.12.2/dist/mermaid.min.js').then(runMermaidFn)
  }

  btf.addGlobalFn('encrypt', loadMermaid, 'mermaid')
  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>